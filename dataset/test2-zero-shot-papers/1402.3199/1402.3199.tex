\subsection{Infinitary Limits of Regular Trace Languages} \label{subsec:sLanguages}

We now consider the \emph{infinitary limit} operator. In the case of word languages, this operator extends regular languages to the family \omReg languages that are DBA recognizable. In particular, we seek an effective characterization of languages , such that  is recognized by an -diamond DBA.

\begin{definition}\label{def:limT}
 Let , the \emph{infinitary limit}  is the -trace language containing all   such that there exists a sequence  satisfying  and .
\end{definition}

\begin{remark}
For , it holds that . In fact, if for a finite semigroup , a morphism  recognizes , then  can be described in terms of a set  of linked pairs of , i.e. .
\hfill
\end{remark}

\begin{figure}[ht]
\centering
\begin{tikzpicture}[node distance=10mm, shorten >=1pt, thick, >=stealth, every state/.style={minimum size=3mm}, initial text=]
	  \node[state, initial] (q) at (0,0)  {\small{}};
	  \node[state] (p1) at (1,1) {\small{}};
	  \node[state] (p2) at (1,-1) {\small{}};
	  \node[state] (p3) at (2,2) {\small{}};
	  \node[state] (p4) at (2,0) {\small{}};
	  \node[state] (p5) at (2,-2) {\small{}};
	  \node[state] (p6) at (3,1) {\small{}};
	  \node[state] (p7) at (3,-1) {\small{}};
	  \node[state, accepting] (p8) at (4,0) {\small{}};

	  \path[->]  
			(q) edge node [auto, inner sep=1pt]  {\small{}} (p1)
			(q) edge node [auto, swap, inner sep=1pt]  {\small{}} (p2)
			
			(p1.north) edge node[auto, inner sep=1pt] {\small{}} (p3.west)
			(p1) edge node[auto, inner sep=1pt] {\small{}} (p4)

			(p2.east) edge node[auto, inner sep=1pt] {\small{}} (p5.north)
			(p2) edge node[auto, inner sep=1pt] {\small{}} (p4)

			(p3.south) edge node[auto, inner sep=1pt] {\small{}} (p1.east)
			(p3) edge node[auto, inner sep=1pt] {\small{}} (p6)

			(p4.east) edge node[auto, inner sep=1pt] {\small{}} (p7.north)
			(p4.north) edge node[auto, inner sep=1pt] {\small{}} (p6.west)

			(p5.west) edge node[auto, inner sep=1pt] {\small{}} (p2.south)
			(p5) edge node[auto, inner sep=1pt] {\small{}} (p7)

			(p6.south) edge node[auto, inner sep=1pt] {\small{}} (p4.east)
			(p6.east) edge node[auto, inner sep=1pt] {\small{}} (p8.north)

			(p7.west) edge node[auto, inner sep=1pt] {\small{}} (p4.south)
			(p7.north) edge node[auto, inner sep=1pt] {\small{}} (p8.west)

			(p8.south) edge node[auto, inner sep=1pt] {\small{}} (p7.east)
			(p8.west) edge node[auto, inner sep=1pt] {\small{}} (p6.south);
	\end{tikzpicture}   
\caption{The minimal DFA recognizing language  of Example \ref{ex:noLim}.}
\label{fig:noLim}
\end{figure}

\begin{example}\label{ex:noLim}
 Let , and . Define  as the trace-closed language with even number of occurrences of 's and 's. The minimal DFA accepting this language is shown in Figure \ref{fig:noLim}. If , then  is defined as 
  

The trace-closed language  consists of all infinite words  that satisfy the same conditions as  above.
\hfill 
\end{example}

It is easy to verify that the DFA of Figure \ref{fig:noLim} does not accept   when equipped with a BÃ¼chi acceptance condition. For instance, the automaton can loop forever in states , , and , thereby witnessing infinitely many 's and 's, without ever visiting state .

\begin{proposition}\label{prop:noLim}
 There does not exist any -diamond DBA recognizing  as described in Example \ref{ex:noLim}.
\end{proposition}
\noindent A proof of this proposition can be found in the appendix.




\begin{corollary}
 There exists a family  of trace-closed regular languages of finite words, namely  over , such that given  for any , there exists no -diamond DBA recognizing .
\end{corollary}

\begin{definition}
 A trace-closed language  is \emph{-limit-stable} (or simply \emph{limit-stable}) if  is also trace-closed. By extension,  is \emph{limit-stable} if  is.
\end{definition}

Toward characterizing limit-stable languages, we introduce some definitions. Let  be a language of traces and let  be two traces. The \emph{prefix graph} of the pair  is the directed, acyclic graph  with  and  if  for some . A \emph{cut} of  is a set  such that each path from  to  in  visits at least one vertex from . Note that if  for some , then  does not admit a cut. A pair  is \emph{-separable} if  admits a cut .

Let . Define an infinite transition-graph  with  and  if  for some . Then there is a one to one correspondence between the paths starting from  through  and the linearizations of . More precisely, for any finite word , there exists a run  from  on  in  iff  is the linearization of some prefix  of . An infinite word  is a linearization of  iff  is a linearization of some prefix  of  for all . Hence, an -word  is a linearization of  iff it induces a run  in . 

Let  be a finite semigroup, let , and let  be a linked pair of . Let  be a morphism from  onto . The pair  has the \emph{-cut property} if
\begin{itemize}
\item either for every factorization  with , we have  for some ;
\item or for every factorization  with , we have  for all .
\end{itemize}

\begin{lemma}
\label{lem:exists_satur_and_rec_semigrp}
Let . Then there exists a finite semigroup  and a saturating morphism  which recognizes both  and . 
\end{lemma}
Such a morphism is said to \emph{simultaneously recognize}  and . Given an automaton, we write  if some  leads from  to , and  if a final state is also visited.

\begin{definition}
Given , let   be an -diamond automaton.  is \emph{-cycle closed}, if for all  and all  we have  iff .
\end{definition}

We can now give an effective characterization of limit-stable languages. Due to space constraints, we only present a part of the following proof here. Lem. \ref{lem:exists_satur_and_rec_semigrp} ensures that (\ref{thm:lim_trace_char:5}) is not trivially satisfied.

\begin{theorem}\label{thm:lim_trace_char}
Let  and let . The following are equivalent:
\begin{enumerate}[(a)]
\item , and therefore , is limit-stable.\label{thm:lim_trace_char:1}
\item For all sequences  and all sequences  with , there exists a subsequence  and a sequence  of proper prefixes  with  and  for all .\label{thm:lim_trace_char:2}
\item For any  there exists a strictly monotone  such that any infinite path  in  visits  in each segment .\label{thm:lim_trace_char:3}
\item Let  be a sequence of traces in . Then there exists a subsequence , such that  is -separable for all .\label{thm:lim_trace_char:4}
\item If  and  are simultaneously recognized by a morphism  for some finite semigroup , then every linked pair  has the -cut property. \label{thm:lim_trace_char:5}  
\item Any DFA  recognizing  is -cycle closed.\label{thm:lim_trace_char:6}  
\end{enumerate}
\end{theorem}
\begin{proof}
(\ref{thm:lim_trace_char:1})(\ref{thm:lim_trace_char:2}): If (\ref{thm:lim_trace_char:2}) is false, then we may choose a sequence  of traces in  with the property that for some sequence  of linearizations of , every subsequence , and every sequence  of proper prefixes , , we have . Since  we have that  is a compact space. Hence  has a converging subsequence . Because every subsequence of  has the properties given in the previous sentence, so does . Let . Then  for some  with . Hence, . But, by construction,  because for some  no prefix of length  of  is in .

(\ref{thm:lim_trace_char:2})(\ref{thm:lim_trace_char:1}): Let  for traces . We may assume that  implies . Let . Then we pick prefixes  of , such that  is of minimal length with . Consider the subsequence  of . Each  is a prefix of some linearization of , say . We apply (\ref{thm:lim_trace_char:2}) to the sequence  and get a sequence  of proper prefixes of the , such that  and . We now have to show that  is already a prefix of . Suppose not, i.e. . Then this would give a trace  with . 

(\ref{thm:lim_trace_char:1})(\ref{thm:lim_trace_char:6}): Suppose  is not -cycle closed. Then there exists  and  with  but not . Since  is -diamond, this means that the run  exists, but does not visit a final state. Now pick  with . Then  and . But clearly  implies that  is not trace-closed.

(\ref{thm:lim_trace_char:6})(\ref{thm:lim_trace_char:1}): Let  and let . Take  and consider extended transition profiles  for  defined by  iff  and  iff  but not . Then we can factorize  for finite words  with  and . Likewise we can factorize . 

Next, we observe that we find  with . This gives  with . Conversely, there exists  with  and therefore  with , which implies . 

Notice that if  and  , then (by trace equivalence and the fact that  is -diamond) we have . Likewise we have  and . Now we can apply (\ref{thm:lim_trace_char:6}) to see that  iff . However, since , since  for all , and since ,  we have  .  Hence, . Since furthermore , we have for all  whence .
\end{proof}

\begin{corollary}\label{cor:I-DBA-decidable}
Let  for some . Given , it is decidable in time  whether or not  is limit-stable.
\end{corollary}

Let  be recognizable, trace-closed. Pick a DACMA (c.f. Sec. \ref{prelim})  recognizing . Recall that the global transition behavior of  gives an -diamond DFA, which we denote by . Given  we define the DBA , where . Note that  is -cycle closed, because for any  and all  with  and  we have\footnote{This can be proven by an induction on the number of swapping operations needed to obtain  from .} .  Now: 


In \cite{DM93}, it was shown using algebraic arguments that every \omReg trace language can be expressed as a finite Boolean combination of ``restricted'' -languages. This result also extends to the corresponding trace-closed linearization languages. Our characterization of limits of limit-stable languages allows for a first automata-theoretic equivalence result.

\begin{theorem}
Let  be a trace-closed -language.  is \omReg iff  is a finite Boolean combination of -diamond DBA recognizable trace-closed languages.
\end{theorem}