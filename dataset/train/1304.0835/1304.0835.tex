\documentclass[10pt,journal]{IEEEtran}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{multirow,cite}
\usepackage{epsfig}
\usepackage{algorithm,algorithmic}
\def\x{{\mathbf x}}
\def\L{{\cal L}}
\def\d{\downarrow}
\def\u{\uparrow}
\def\U{\Uparrow}
\def\D{\Downarrow}

\begin{document}
\title{Improved Analytical Delay Models for RC-Coupled Interconnects}

\author{Feng Shi, Xuebin~Wu, and Zhiyuan~Yan

  \thanks{Feng Shi, Xuebin Wu, and Zhiyuan
    Yan are with the Department of ECE,
    Lehigh University, PA 18015, USA. E-mails:\{fes209, xuw207,
     yan\}@lehigh.edu.}}








\maketitle
\begin{abstract}
As the process technologies scale into deep submicron region, crosstalk delay is becoming increasingly severe, especially for global on-chip buses. To cope with this problem, accurate delay models of coupled interconnects are needed.
In particular, delay models based on analytical approaches are desirable, because they not only are largely transparent to technology, but also explicitly establish the connections between delays of coupled interconnects and transition patterns, thereby enabling crosstalk alleviating techniques such as crosstalk avoidance codes (CACs).
Unfortunately, existing analytical delay models, such as the widely cited model in~\cite{Sot01}, have limited accuracy and do not account for loading capacitance. In this paper, we propose analytical delay models for coupled interconnects that address these disadvantages.
By accounting for more wires and eschewing the Elmore delay, our delay models achieve better accuracy than the model in \cite{Sot01}.
\end{abstract}
\begin{keywords}
Crosstalk, interconnect, delay, bus
\end{keywords}

\section{Introduction}
\label{sec:intro}
Crosstalk caused by coupling capacitance between adjacent wires leads to additional delay to multi-wire buses. As the process technologies scale into deep submicron region,
coupling capacitance between adjacent wires and hence crosstalk delays increase greatly. According to the International Technology Roadmap
of Semiconductors (ITRS) \cite{ITRS}, gate delay \textbf{decreases} with scaling, while
global wire delay \textbf{increases}. Hence, the crosstalk delay problem is becoming increasingly severe in VLSI designs, especially for global on-chip buses, and will become the performance bottleneck in many high-performance VLSI designs.

This paper focuses on analytical delay models applicable to general coupled interconnects. Although various delay models of interconnects have been proposed in the literature (see, for example, \cite{Kay98,Pil98,Alp01,Sot01,Sot02,Liu02,Dav002,Abo02,Tu06,Mol09}), few are comparable to our work in this paper. Some delay models (see, for example, \cite{Kay98,Alp01,Liu02,Mol09,Pil98,Abo02}) do not consider crosstalk from adjacent wires. Furthermore, most previously proposed delay models are based on numerical approaches (see, e.g., \cite{Kay98,Alp01,Liu02,Dav002,Tu06,Mol09,Pil98,Abo02}). They can achieve high accuracy, but they have several drawbacks. First, they sometimes lead to lookup tables of delays from any initial state to any next state (see, for example, \cite{Mol09}), which are often bulky and difficult to obtain and use. Second, numerical approaches in \cite{Kay98,Pil98,Alp01,Liu02,Abo02} are technology-dependent and their delays often depend on many parameters. Hence these approaches have poor portability and are not applicable to general cases. Third, the delays obtained by the numerical approach offer little insight, and are not conducive to technology-independent crosstalk alleviation techniques such as crosstalk avoidance codes (CACs) (see, for example, \cite{Dua01,Vic01,Sri07,Wu09}). Fourth, numerical approaches often have very high complexities. In contrast, analytical approaches are advantageous in these aspects. Analytical approaches depend on few technology parameters, and hence they are largely technology independent. Furthermore, analytical approaches illustrate the connection between delays of coupled interconnects and transition patterns, thus enabling us to design CACs. Finally, analytical approaches have very low computational complexities.
A widely cited analytical delay model proposed by Sotiriadis \emph{et al.} \cite{Sot01,Sot02}, which uses the similar methodology to that in \cite{SC_TVLSI02}, appears to be the most comparable previous delay model to our work in this paper.



Based on the model in \cite{Sot01,Sot02}, the delay of the -th wire () of an -bit bus is given by

where  is the ratio of the coupling capacitance between
adjacent wires and the ground capacitance of each wire,
 is the intrinsic delay of a transition on a single wire,
and  is  for  transition,  for
 transition, or  for no transition on the -th
wire. We observe that in this model, the delay of the -th wire
depends on the transition patterns of wires , , and  only. Since all possible values of  in Eq.~(\ref{Eq:1}) are  for , all transition patterns on wires , , and  can be divided into five classes according to their corresponding . These five classes are denoted as  for  (this classification was also used in \cite{Dua01}). Based on this model, various CACs (see, for example,  \cite{Dua01,Vic01,Sri07,Wu09}) have been proposed, based on the central idea of achieving a reduced delay by limiting transition patterns over the bus, at the expense of additional wires.


However, the model in \cite{Sot01} have two significant drawbacks. First, the model in \cite{Sot01} has limited accuracy. In a bus with more than three wires, the simulated wire delay for  transition patterns is much larger than , the delay of  given by (\ref{Eq:1}). This implies that the scheme that uses two shield wires with the same transition to achieve a delay of  (see, for example, \cite{Dua04}) will be ineffective. Our simulation results also show that the delays of other classes of transition patterns given by Eq.~(\ref{Eq:1}) have limited accuracy as well. This is partially because of the model's dependence on only three wires.
Also, the model in \cite{Sot01} uses in its derivation the Elmore delay, which tends to overestimate the delay \cite{Elm48,Gup97}.

The second drawback of the model in \cite{Sot01} is that it does not account for the loading capacitance. It has been shown that the loading capacitance is crucial in real practice and can affect the total delay for all patterns.




Addressing these disadvantages for the model in \cite{Sot01}, in this paper we propose analytical delay models for coupled interconnects. Our delay models first derive closed-form expressions of the signals on the bus via a distributed RC model, and then approximate the wire delays by evaluating these closed-form expressions.
Our delay models differ from the model in \cite{Sot01} in three aspects. First, in our delay models, we eschew the Elmore delay used in the model in \cite{Sot01}. Then, we consider either three wires or five wires in our delay models for improved accuracy. Due to these two differences, our models have significantly improved accuracy than the model in \cite{Sot01}. Finally, we take into account the buffer effects (driver resistance and loading capacitance). Our delay models also maintain the simplicity of the model in \cite{Sot01}, and the transition patterns are divided into several categories based on their delays. Hence, our delay models are easy to use and conducive to the design of CACs.
Although our delay models consider adjacent three and five wires in this paper, our models are applicable to buses of any number of wires.

Simulation results show that our delay models offer significant advantages than the model in \cite{Sot01}. Our simulations results fall into three scenarios. First, we compare the delays produced by our model and the model in \cite{Sot01} with the simulated delays for three- or five-wire buses. This is motivated by partial coding schemes (see, e.g., \cite{Dua01}, \cite{Vic01}, and \cite{Sri07}), which divide a wide bus into sub-buses with a few wires and separate them by shielding wires.
Second, we obtain extensive simulation results for 17- and 33-wire buses assuming arbitrary transition patterns. Third, we assume the transition patterns are limited to those of CACs. In all three scenarios, our five-wire delay model is much more accurate than the model in \cite{Sot01}. 


With the scaling of technologies, the inductance is becoming significant and impacts the signals on the bus greatly. Due to the coupling effect of inductance, the worst-case patterns for an RLC modeled bus are quite different from that of an RC modeled bus~\cite{Tu06}. Hence, the CAC design methodology would change greatly due to the inductance effect.
However, our delay models do not consider the inductance effect  for two reasons.
First, it seems difficult to derive a closed-form expression of the signals on the bus based on the RLC model. Hence, our methodology cannot be easily adapted from the distributed RC model to an RLC model. Second, according to the criteria in \cite{Ism99}, the inductance effect is significant in some cases, but are negligible in other cases. Specifically, the range of significance of the inductance effect is given by  \cite{Ism99}, where  is the length of the wire,  the input transition time, and , , and  the resistance, inductance, and capacitance per unit length, respectively.
According to \cite{CSLJ_JLPE08}, the inductance effect is not negligible for very deep submicron technologies and extremely long wires.
In current industry applications, the on-chip inductance effect is still insignificant. This conclusion was also confirmed by other works: the 16-bit, 32Gb/s, 5mm-long bus and 8-bit, 16Gb/s, 10mm-long bus in \cite{Zha09} show that the distributed RC model is sufficiently accurate for these high-speed long interconnects. In our work, our delay models are derived based on 5mm-long buses under a 45nm technology, where inductance effect is negligible.














The rest of the paper is organized as follows. In Section~\ref{sec:model}, we propose our delay models. The delay models are also modified to account for the buffer effects.
In Section~\ref{sec:simulation}, we present extensive simulation results for our delay models. Concluding remarks are provided in Section~\ref{sec:conclusion}.

\section{Delay model}
\label{sec:model}

In this section, we first present the system model, where switching instants of all wires in the bus are assumed simultaneous. For three-wire and five-wire buses, we then derive closed-form expressions for outputs of the bus, and finally approximate their delays and compare them with those by the model in \cite{Sot01}.

\subsection{System model}

In this paper, we focus on global interconnects connecting different modules for communication, such as data and address buses, and use the distributed RC model for interconnect modeling. For simplicity, we assume regular interconnects, which have uniformly distributed parameters and are paralleled routed in the same metal layer without turnings. Hence, the interconnects are modeled as transmission lines, which can be characterized by the telegrapher's equations.
For complex interconnect structures with jumps and turnings, additional resistance due to vias and unequal length of wires should be included, which makes the interconnect behavior more complicated. However, crosstalk delays are expected to increase due to the additional resistance.
The partially coupled buses are more complex and hence are not considered in this paper. We plan to investigate this in our future work.
The capacitance between non-adjacent wires is negligible compared with capacitance between adjacent wires, since the capacitive coupling effect is a short range effect~\cite{SC_TVLSI02}.
The distributed RC model is often used to approximate the buses~\cite{Rab96}. Although the closed-form expressions of the signals on the bus via a distributed RC model are sums of infinite terms, usually sums of the two most significant terms provide a very close approximation of signals on the bus \cite{Sak93}.


The distributed RC model of an -wire bus is shown in Fig.~\ref{fig:3bus}, where  denotes the transient signal at a position  along wire  for ,  and  denote the resistance and capacitance per unit length, respectively. Also,  denotes the coupling capacitance per unit length between two adjacent wires. The output resistance of a driver is approximated as a linear resistor, , and the loading due to a receiver is modeled as a capacitance, . In this work, we focus on a uniformly distributed bus and hence assume the parameters , , and  are the same for all the wires.

\begin{figure}[!tb]
\begin{minipage}[b]{1.0\linewidth}
  \centering
 \centerline{\epsfig{figure=mwirerc,width=8.5cm}}
\end{minipage}
\caption{A distributed RC model of an -wire bus.}
\label{fig:3bus}
\end{figure}


We use the 50\% delay, which is defined as the time difference between the respective instants when the input signal and corresponding output signal cross 50\% of the supply voltage . According to \cite{Kah99}, the delays of global interconnects are slightly affected by the slew rate. Since this work focuses on global interconnects, we ignore input slew and assume ideal step signals are applied on the bus directly. In this paper, we use the same classification  for  in \cite{Sot01} and focus on the worst 50\% delay of any wire for all classes to formulate our delay models.
We consider the closest neighbors for crosstalk, since farther wires have weaker coupling effects.
In Section~\ref{sec:3m}, we first focus on internal wire, wire 2 in a three-wire model, to account for most adjacent two wires (one wire to the left and one to the right). In Section~\ref{sec:5w}, we focus on internal wire, wire 3 in a five-wire model, to account for most adjacent four wires (two wires to the left and two to the right).
In Section~\ref{sec:boundary}, we derive the delay for boundary wires, wires 1, 2, 4, and 5 in a five-wire model.
In Section~\ref{sec:application}, we show how to identify the worst-case delays among all wires for a wide bus via a shift window scheme.


In this section, we first derive delay models by assuming that the buffer effects (driver resistance and loading capacitance) are negligible. This is an important case since the propagation delay is characterized only by the distributed interconnects. Then, in Section~\ref{sec:revised}, we modify the delay models to account for the buffer effects, which are crucial in real practice. It has been shown that the buffer effects would increase the total delay for all patterns.


Below we first investigate the case  and then extend our results to the case . There are two reasons for studying the three-wire model. First and foremost, the derivation of our five-wire model is based on the three-wire model. Second, our three-wire model is more accurate than our five-wire model for buses with only three wires, which is of interest for partial coding schemes (see, e.g., \cite{Dua01}, \cite{Vic01}, and \cite{Sri07}).
We use  to denote the worst delay of the middle wire (wire ) of an -wire bus for all  patterns.

\subsection{Internal wires for three-wire model}
\label{sec:3m}

In~\cite{Sak93}, the crosstalk of two coupled lines was described by partial differential equations (PDEs), and a technique for decoupling these highly coupled PDEs was introduced by using eigenvalues and corresponding eigenvectors.
Using the same technique as in \cite{Sak93}, we obtain the differential equations describing a three-wire bus with length :

where  and  denotes the voltage of wire  at distance  () at time  for ,
, and .


The boundary conditions are given by

where  and  denote the initial and final voltages of the transition on wire , respectively.


We find the three eigenvalues of , , , and , and their corresponding eigenvectors 's, , , and , respectively. Hence, Eq.~(\ref{Eq:2}) is transformed to

where  for . So , , and .

Applying Laplace transform on both sides of Eq.~(\ref{Eq2}), we have


Using appropriate initial conditions, we solve Eq.~(\ref{Eq1}) for  and obtain .
By solving , we can approximate the 50\% delay of a three-wire bus for different transition patterns.


In this paper, we use ``" to denote a transition from 0 to the supply voltage  (normalized to 1), ``-" no transition, and ``" a transition from  to 0.

For  pattern , the output of wire 2 is given by~\cite{Sak93} , where , and .

For the 50\% delay, keeping only the first exponential term is accurate enough. So we have .
Similarly, we keep only the first exponential term as the solution for other cases.
Solving , we have .
Similarly, the closed-form expressions of wire 2 and approximate delays for other classes are derived and summarized in Table~\ref{tab:3wire}, where  the approximate delay for  pattern by our three-wire model.

\begin{table}[!thb]
\caption{Closed-form expressions of signal on wire 2 and approximate delays in a three-wire bus (, , and .)}\label{tab:3wire}
\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{2}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-4}
& Pattern &  &  & \\
\hline
 &  &  & 0 &  \\
\hline
 & - &  &  & \\
\hline
 & -- &  &  &  \\
\hline
 & - & 0 &  &  \\
\hline
 &  &  &  &  \\
\hline
\end{tabular}
\end{center}
\end{table}




\subsection{Internal wires for five-wire model}\label{sec:5w}
To further improve the accuracy of delay, we include two extra adjacent wires to approximate the delay by considering the influences of all five wires. Each wire has three kinds of transition: , -, and . Hence, for such a five-wire bus, there are  transition patterns. To maintain the simplicity of our models, we still divide them into five classes () based on the transition patterns of middle three wires (wires 2, 3, and 4). Hence, there are nine different transition patterns for each pattern of the same class.

Since the interconnect is a linear system, any pattern can be decomposed into a combination of patterns with transitions on a single wire. For example, - is decomposed as (- - - -) +  (-- - -) + (- -- -) + (- - --). The delay expression of the middle wire impacted by any pattern is given by a summation of effects of individual wires on the middle wire.
However, this approach would result in expressions that are hard to analyze. Instead, we propose to group these individual wires to form some special patterns, which can be analyzed easily.\\

\textbf{Definition 1}: Reducible transition pattern (RTP)

An RTP in the five-wire model is defined as a transition pattern that can be reduced to a transition pattern in the three-wire model. The set \{, , --, --\} is the set of RTPs for the five-wire model.

For the transition  (similarly for ), all wires have the same transitions. There are no coupling capacitance between any two adjacent wires. So the expression of wire 3 is approximated by
 and the delay is approximated by . For the transition -- (similarly for --), wires 2 and 4 can be approximated as ground wires in the five-wire bus, since wire 1 (or 5) and wire 3 have opposite transitions. For wire 3, the five-wire pattern is equivalent to a three-wire pattern , where the equivalent coupling capacitor between wire 1 (or 5) and wire 3 is equal to two capacitors in series between wires 1 and 2, and wires 2 and 3 (or wires 3 and 4, and wires 4 and 5).
Hence, the equivalent coupling factor between wire 1 (or 5) and wire 3 is approximated as  per unit length (that is, the ratio of the coupling capacitance and the loading capacitance is ). The expression of wire 3 is approximated by , and the delay is approximated by .\\

\textbf{Definition 2}: Single transition pattern (STP)

An STP is defined to be a transition pattern with transitions on only one wire. For our five-wire model, we focus on the set of STPs with transitions on wire 2 or 4, \{--~-~-, --~-~-, -~-~--, -~-~--\}.

The expressions of wire 3 can be approximated by considering wires 2, 3, and 4 as a three-wire model. Let  denote the signal on wire  due to coupling from wire . For example, by ignoring coupling from wires 1 and 5 in -- - -, the output of wire 3 is approximated by  , which is obtained by considering only wires 2, 3, and 4.\\

We propose the following approaches to derive the delay of the five-wire bus.
\begin{itemize}
\item We first \textbf{decompose} the worst pattern in each class into a combination of an RTP and STP(s).
\item Then we combine the expressions of the RTP and STP(s) for the middle wire based on the conclusion of our three-wire model.
\item Finally, we evaluate the expression of the middle wire to approximate its delay.
\end{itemize}

Since the performance is limited by the worst-case delay in each class, we need to approximate the delays of only the worst patterns in each class.
We use simulation to identify the worst patterns in all classes.
The worst patterns for  to  are given by , -, --, -, and , respectively (assuming the middle wire has an upward transition). With RTPs and STPs, we decompose the worst pattern in each class as shown in Table~\ref{tab:decomp}.
\begin{table}
\caption{Decomposition of worst-case patterns in the five-wire model.} \label{tab:decomp}
\begin{center}
\begin{tabular}{|c|c|l|}
\hline
 & Worst pattern & Decomposition\\
\hline
 &  & (--)+(-- - -)+( - - --)\\
\hline
 & - & (--)+(- - --)\\
\hline
 & -- & (--)\\
\hline
 & - & ()+(- - --)+ (- - --) + (-- - -)\\
\hline
 &  & ()+(-- - -)+(-- - -)+(- - --)+(- - --)\\
\hline
\end{tabular}
\end{center}
\end{table}


The closed-form expressions of wire 3 and approximate delays for all classes in a five-wire bus are derived and summarized in Table~\ref{tab:5wire}, where  the approximate delay for  pattern by our three-wire model.

\begin{table}[!t]
\caption{Closed-form expressions of signal on wire 3 and approximate delays in a five-wire bus (, , and .)}\label{tab:5wire}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{3}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-5}
& Pattern &  &  &  & \\
\hline
 &  &  &  &  &  \\
\hline
 & - & 0 &  &  & \\
\hline
 & -- &  &  & 0 &  \\
\hline
 & - & 0 & 0 &  &  \\
\hline
 &  &  & 0 &  &  \\
\hline
\end{tabular}
\end{center}
\end{table}


\subsection{Boundary wires}
\label{sec:boundary}
In the previous derivation, we focus on middle wires and consider four neighboring wires (two to the left and two to the right) for crosstalk. In this section, we derive delay models to account for the boundary wires of an -wire bus (wires 1, 2, , and ). For wire 1 (wire ), we consider wires 2 and 3 to the right (wires  and  to the left) for crosstalk, and use the same classification as in Eq.~(\ref{Eq:1})~\cite{Sot01}. Note that for wires 1 and , there are only three classes of patterns, , , and .
With the similar technique, the closed-form expressions of wire 1 (wire ) and approximate delays for all classes are derived and summarized in Table~\ref{tab:wire1}, where  is the approximate delay for  pattern.
For wire 2 (wire ), we consider wire 1 to the left and wires 3 and 4 to the right (wires ,  to the left and wire  to the right) for crosstalk. Similarly, the closed-form expressions of wire 2 (wire ) and approximate delays for all classes are derived and summarized in Table~\ref{tab:wire2}, where  is the approximate delay for  pattern.

\begin{table}[!t]
\caption{Closed-form expressions of signal on wire 1 and approximate delays (, , and .)}\label{tab:wire1}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{3}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-5}
& Pattern &  &  &  & \\
\hline
 &  &  &  &  &  \\
\hline
 & - & 0 &  & 0 & \\
\hline
 &  &  &  &  &  \\
\hline
\end{tabular}
\end{center}
\end{table}

\begin{table}[!t]
\caption{Closed-form expressions of signal on wire 2 and approximate delays (, , and .)}\label{tab:wire2}
\begin{center}
\begin{tabular}{|c|c|p{3mm}|p{3mm}|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{4}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-6}
& Pattern &  &  &  &  & \\
\hline
 &  &  &  &  &  &  \\
\hline
 & - &  &  &  &  & \\
\hline
 &  & 0 &  & 0 & 0 &  \\
\hline
 & - &  &  &  &  & \\
\hline
\multirow{2}{*}{} & \multirow{2}{*}{} & \multirow{2}{*}{0} & \multirow{2}{*}{0} & \multirow{2}{*}{} & \multirow{2}{*}{} &  \\
& & & & & & \\
\hline
\end{tabular}
\end{center}
\end{table}

\subsection{Revised models with consideration of the buffer effects}
\label{sec:revised}
In the previous derivation, the buffer effects are ignored with assumption that the driver resistance and loading capacitance are relatively small. In practice, the values of resistance and capacitance vary with different structure of buffers.
In this work, we consider drivers and receivers implemented as a non-inverting inverter chain. The simplest one has two chained inverters. The loading capacitance  and driver resistance  are due to the first and last stage inverters in the chain, respectively.
The buffer strength is measured by the normalized size of inverter to the smallest inverter.
For global interconnects in submicron technology, the loading capacitance is not significantly large in comparison with that of interconnect. According to~\cite{ANRS_TCASI08}, for a 45nm technology~\cite{FreePDK45}, the loading capacitance  induced by a 100 times inverter is given by 25 fF. In this paper, we consider loading capacitance as large as 100 fF. For significantly large , the delay due to  would dominate the total propagation delay and all classes of patterns would collapse into one class.
In the following, we revise our models to capture the buffer effects of  and  at the inputs and outputs of the interconnects, respectively.




First, we focus on our three-wire model. With consideration of buffer effects, the differential equation is still given by Eq.~(\ref{Eq:2}). Only the boundary conditions need to be changed. The revised boundary conditions are given by



By solving the differential equations of a three-wire bus, we derive the expressions of all worst-case patterns as shown in Table~\ref{tab:3dif}.
The revised delay expressions are listed in column five of Table~\ref{tab:3dif}.
Note that the revised three-wire delay model would reduce to that in Table~\ref{tab:3wire}, when the driver resistance and loading capacitance are relatively small,  and .





\begin{table}[!t]
\caption{Expressions of middle wire in a three-wire model, where , , , ,  ,  , , , , and .} \label{tab:3dif}
\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{2}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-4}
& Pattern &  &  & \\
\hline
 &  & 1 & 0 &  \\
\hline
 & - &  &  &  \\
\hline
 & -- &  &  &  \\
\hline
 & - & 0 & 1 &  \\
\hline
 &  &  &  &  \\
\hline
\end{tabular}
\end{center}
\end{table}


\begin{table}[!t]
\caption{Expressions of middle wire in a five-wire model, where , , , , ,  , ,  , , , , , , , and .} \label{tab:5dif}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst & \multicolumn{3}{|c|}{Coeffs. of } & \multirow{2}{*}{}\\
\cline{3-5}
& Pattern &  &  &  & \\
\hline
 &  &  &  &  &  \\
\hline
 & - & 0 &  &  &  \\
\hline
 & -- &  &  & 0 &  \\
\hline
 & - & 0 & 0 & 1 &  \\
\hline
 &  &  & 0 &  &  \\
\hline
\end{tabular}
\end{center}
\end{table}



Similarly, for a five-wire bus, we derive the expressions of all worst-case patterns in each class as shown in Table~\ref{tab:5dif}.
The ratio between  and  is given by . Then the 50\% delay can be solved by assuming . The revised delay expressions are listed in column six of Table~\ref{tab:5dif}.
Note that the revised five-wire delay model would reduce to that in Table~\ref{tab:5wire}, when the driver resistance and loading capacitance are relatively small,  and .


\begin{table}[!t]
\caption{Bus parameters in a 45 technology.} \label{tab:parameter}
\begin{center}
\begin{tabular}{|c|c||c|c|}
\hline
\multicolumn{4}{|c|}{Parameters} \\
\hline
 & 5 mm &  & 13.75 /mm \\
\hline
 & 0.8 m &  & 1.736 nH/mm \\
\hline
 & 0.8 m &  & 8.263 fF/mm \\
\hline
 & 2 m &  & 101.136 fF/mm \\
\hline
 & 4.82 m &  & 100  \\
\hline
 & 2.5 &  & 0 fF \\
\hline
\end{tabular}
\end{center}
\end{table}

According to the delay expressions in Tables~\ref{tab:3dif} and \ref{tab:5dif}, both driver resistance and loading capacitance tend to increase the delay. When the loading capacitance increases, the delay difference among all classes diminishes. For extremely large , the delays for all classes are close and the classification becomes inconsequential.






\subsection{Characterization of the delay of a multi-wire bus}
\label{sec:application}


In the derivation of our five-wire model above, we focus on the worst-case patterns of the middle wires only.
We also derive delay models for boundary wires. In the following, we show that our five-wire model can be easily applied to approximate the delays of an -wire bus ().
First, we use our five-wire delay model as a shift window to scan the internal wires (wires 3 through ) to identify the longest delay.
Then, for boundary wires (wires 1, 2, , and ), we use the models in Tables~\ref{tab:wire1} and \ref{tab:wire2} for delay approximation. Hence, the delay of an -wire bus is given by the largest delay among all wires.
For example, for a pattern  of a six-wire bus, the classes for wires 1 through 6 are given by , , , , , and , respectively. Thus, the worst-case class is given by . According to our models in Tables~\ref{tab:5wire}, \ref{tab:wire1}, and \ref{tab:wire2}, the worst-case delay is given by the larger one of the two delays  and .

The proposed analytical delay models target two important applications. One primary application of our model is the design of crosstalk avoidance codes (CACs). Since our proposed models provide more accurate delays for different transition patterns than previous models, we can identify unwanted patterns more effectively. Second, our models can be applied to partial coding schemes, where buses are broken into sub-buses, since our models are more accurate for a bus of small size.
To incorporate such analytical delay models in EDA softwares, such as a typical timing analysis flow, appropriate adjustments are needed. We plan to investigate this important scenario in our future work.







\subsection{Discussion on synchronization problems}
\label{sec:sync}

In previous subsections, we assume simultaneous transitions on all the wires. However, for global buses where buffer insertion techniques are usually used to reduce their delay \cite{Tsa06}, simultaneous signal transitions on the bus cannot be guaranteed. Our derived models do not work for buses with synchronization problems.
In the following, we briefly discuss the synchronization problems and conclude with insights on the delay changes of interconnects with synchronization problems and impacts on the CAC designs.

Based on our three-wire and five-wire models, we observe \textbf{two possible scenarios} with regard to the impact of synchronization problems on the delay. When the time differences are relatively small, the delay is increased only by the time differences. When the time differences are sufficiently large, they can change the worst delay of a class to a different class. For instance, the delays of the transition patterns in  and  may be increased to those of  when the time differences are large enough, and similarly  to . This is consistent with the observation in~\cite{Dua04}. On the other hand, the delays of the transition patterns in  may decrease to those of  class when the time differences are large enough. Intuitively, this is because large time differences change the intended transition patterns into different patterns.
As observed above, depending on the severity of the synchronization problems, the effectiveness of CACs is affected to a varying extent. Furthermore, the sensitiveness to time differences varies with CACs.




\section{Performance evaluation}\label{sec:simulation}
We evaluate the performance of our delay models, and compare it with that of the model in \cite{Sot01} in three scenarios. First, since our delay models focus on three and five adjacent wires, we consider three- and five-wire buses. This scenario is also motivated by partial coding schemes (see, e.g., \cite{Dua01}, \cite{Vic01}, and \cite{Sri07}), which divide a wide bus into sub-buses with a few wires and separate them by shielding wires.
The second scenario is buses with more than five wires. We have run extensive simulations on buses with an odd number of wires (up to 33 wires). Our conclusions are the same regardless of the number of wires. For brevity, we present our simulation results for 17- and 33-wire buses.
In the first two scenarios, we focus on the worst-case delays of the middle wires. To characterize the whole bus transitions, our five-wire model can be applied to all wires to approximate their delays with higher accuracy.
In the third scenario, we assume the transition patterns are limited to those of CACs and consider the worst-case delays for all wires of an 8-wire bus.


\begin{figure}[!tb]
\begin{minipage}[b]{1.0\linewidth}
  \centering
 \centerline{\epsfig{figure=interconnect,width=7.5cm}}
\end{minipage}
\caption{Interconnect structure.}
\label{fig:interconnect}
\end{figure}

All the simulation results in this paper are obtained by the following setup. The simulation is based on a 45nm technology with 10 metal layers~\cite{FreePDK45}. The global buses are routed in the top two metal layers, 10 and 9, with a ground metal layer 8 down below as shown in Fig.~\ref{fig:interconnect}.
We consider metal layer 10 for all buses, since the crosstalk is more serious than that of metal layer 9.
The bus parameters are obtained by structure 1 in \cite{PTM} and summarized in Table~\ref{tab:parameter}, where  is the permittivity of the dielectric between metals.
Since the model in~\cite{Sot01} does not account for the loading capacitance, we assume  fF for simulations in comparison with the model in~\cite{Sot01}. We also simulate 17- and 33-wire buses with  fF, which represents the loading capacitance induced by a 400 times inverter.
The coupling factor is given by .
For inputs with  ps, inductance effect is negligible when 1.3 mm  66.7 mm. All the buses for simulation have a length of 5 mm and the inductance effect is not considered in this work. The buses are divided into 100 sections as shown in Fig.~\ref{fig:3bus} to characterize the distributed RC model. The simulation results are obtained from HSPICE.





\subsection{Three-wire and five-wire buses}
For a three-wire bus, the simulated delays are compared with the delays by our model and the model in \cite{Sot01} for all classes in Table~\ref{tab:1}, where  denotes the simulated worst delay of wire 2,  the approximate delay for  pattern by our three-wire model, and  by the model in \cite{Sot01}. The error percentages of our model and the model in \cite{Sot01} are also shown in Table~\ref{tab:1}. For all five classes of transition patterns, the \textbf{maximum} and \textbf{minimum} errors by our model are only 3.14\% and 0.47\%, respectively, as opposed to 891.90\% and 34.38\% by the model in \cite{Sot01}, respectively. As Table~\ref{tab:1} shows, our model is much more accurate than the model in \cite{Sot01} for all patterns in a three-wire bus. We remark that the delay by our model for the  pattern, , does not depend on .


\begin{table}
\caption{Comparison of simulated delays, delays of our three-wire model and the model in \cite{Sot01}. All the delays are in .}\label{tab:1}
\begin{center}
\begin{tabular}{|r|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{}& Worst & Sim. & \multicolumn{2}{|c|}{Our model} & \multicolumn{2}{|c|}{\cite{Sot01}}\\
\cline{3-7} & pattern &  &  &  &  &  \\
\hline
 &  & 3.96 & 4.04 & 2.02\% & 5.55 & 40.15\%\\
\hline
 & - & 7.41 & 7.56 & 2.02\% & 73.50  & 891.90\%\\
\hline
 & -- & 72.28 & 74.55 &  3.14\% & 141.45 & 95.70\%\\
\hline
 & - & 150.74 & 152.24 &  1.00\% & 209.40 & 38.91\%\\
\hline
 &  & 206.40 & 207.36 & 0.47\% & 277.35  & 34.38\%\\
\hline
\end{tabular}
\end{center}
\end{table}

\begin{table}
\caption{Comparison of simulated delays, delays of our five-wire model and the model in \cite{Sot01}. All the delays are in .}\label{tab:2}
\begin{center}
\begin{tabular}{|r|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{}& Worst & Sim. & \multicolumn{2}{|c|}{Our model} & \multicolumn{2}{|c|}{\cite{Sot01}}\\
\cline{3-7} & pattern &  &  &  &  &  \\
\hline
 &  & 35.30 & 23.15 & 34.41\% & 5.55 & 84.28\%\\
\hline
 & - & 63.09 & 62.09 & 1.59\% & 73.50  & 16.50\%\\
\hline
 & -- & 98.39 & 106.43 &  8.17\% & 141.45 & 43.76\%\\
\hline
 & - & 134.19 & 152.24 &  13.45\% & 209.40 & 56.05\%\\
\hline
 &  & 218.91 & 207.36 & 5.28\% & 277.35  & 26.70\%\\
\hline
\end{tabular}
\end{center}
\end{table}





\begin{table*}
\caption{Comparison of simulated delays and delays given by our five-wire model and the model in \cite{Sot01} for wire 9 in a 17-wire bus with  . All the delays are in .}\label{tab:5}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multirow{3}{*}{} & Worst patterns & Sim. & \multicolumn{2}{c|}{Our model} & \multicolumn{2}{c|}{\cite{Sot01}} \\
\cline{3-7}
& via Alg.~\ref{alg:findworst} &  &  &  &  &   \\
\hline
 &  & 42.17 &  23.15 & 45.10\% &  5.55  & 86.84\% \\
\hline
 &  & 67.50 & 62.09 & 8.01\% & 73.50  & 8.89\% \\
\hline
 &  & 112.82 & 106.43 &  5.66\% & 141.45 & 25.38\% \\
\hline
 &  & 165.44 & 152.24 &  7.98\% & 209.40 & 26.57\% \\
\hline
 &  & 228.46 & 207.36 & 9.24\% & 277.35  & 21.40\% \\
\hline
\end{tabular}
\end{center}
\end{table*}





\begin{table*}
\caption{Comparison of simulated delays and delays given by our five-wire model and \cite{Sot01} for wire 17 in a 33-wire bus with  . All the delays are in .}\label{tab:6}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{} & Worst patterns & Sim. & \multicolumn{2}{c|}{Our model} & \multicolumn{2}{c|}{\cite{Sot01}} \\
\cline{3-7}
& via Alg.~\ref{alg:findworst} &  &  &  &  &   \\
\hline
 &  & 42.27 &  23.15 & 45.23\% & 5.55  & 86.87\% \\
\hline
 &  & 68.30 & 62.09 & 9.09\% & 73.50  & 7.61\% \\
\hline
 &  & 113.16 & 106.43 &  5.95\% & 141.45 & 25.00\% \\
\hline
 &  & 165.57 & 152.24 &  8.05\% & 209.40 & 26.47\% \\
\hline
 &   & 229.02 & 207.36 & 9.46\% & 277.35 & 21.10\% \\
\hline
\end{tabular}
\end{center}
\end{table*}


\begin{table*}
\caption{Comparison of simulated delays and delays given by our five-wire model focusing on the middle wire in a 17-wire and a 33-wire buses with  . All the delays are in .}\label{tab:100fF}
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{}& Worst 17-wire patterns & Sim. & \multicolumn{2}{c|}{Our model} & Worst 33-wire patterns & Sim. & \multicolumn{2}{c|}{Our model} \\
\cline{3-5}\cline{7-9}
& via Alg.~\ref{alg:findworst} &  &  &  & via Alg.~\ref{alg:findworst} &  &  & \\
\hline
 &  & 50.75 &  25.11 & 50.52\% &  & 50.78 &  25.11 & 50.55\% \\
\hline
 &  & 76.42 & 67.35 & 11.87\% &  & 76.43 & 67.35 & 11.88\% \\
\hline
 &  & 118.92 & 123.46 &  3.82\% &  & 119.21 & 123.46 &  3.57\% \\
\hline
 &  & 177.71 & 164.62 &  7.37\% &  & 177.74 & 164.62 &  7.38\% \\
\hline
 &  & 236.18 & 224.41 & 4.98\% &   & 236.67 & 224.41 & 5.18\% \\
\hline
\end{tabular}
\end{center}
\end{table*}




For a five-wire bus, the worst delays of all classes of transition patterns based on our five-wire model are compared with those of the model in \cite{Sot01} as well as the simulated delays by HSPICE in Table~\ref{tab:2}, where  denotes the simulated worst-case delay of wire 3 for all  patterns,  the approximate delay for  pattern by our five-wire model, and  by the model in \cite{Sot01}. The error percentages of our model and the model in \cite{Sot01} are shown in Table~\ref{tab:2}. For a five-wire bus the \textbf{maximum} and \textbf{minimum} errors by our model are 34.41\% and 1.59\%, respectively, in comparison to 84.28\% and 16.50\% by the model in \cite{Sot01}, respectively.
As Table~\ref{tab:2} shows, our five-wire model is more accurate than the model in \cite{Sot01} for all patterns in a five-wire bus. In particular, although the delays in the model in \cite{Sot01} were claimed to be upper bounds on the actual delays, our simulation results in Table~\ref{tab:2} show that this claim is invalid for the  patterns. In \cite{Dua04}, the author proposed a method which achieves a delay of  by surrounding each data wire with two shield wires with the same transition. Since the transition patterns for each data wire are always in  class, the delays of the data wires are  according to the model in \cite{Sot01}. In contrast, the delay for the data wires can be as large as  by our model; When  is large, the model in \cite{Sot01} severely underestimates the delay, while our model is more accurate.


\subsection{17-wire and 33-wire buses}
We next compare our five-wire model with the model in \cite{Sot01} for 17- and 33-wire buses. With a 17-wire bus, we focus on the middle wire (wire 9). We still classify the transition patterns according to the transitions of the middle three wires (wires 8, 9, and 10).
Since it is time consuming to identify the transition patterns with the longest delay in each class, we make one assumption about the patterns with the longest delay in each class. For any two wires symmetric to wire 9 (wire  and wire -, ), there are nine possible patterns, , , - -, -, -, -, -, , and . For patterns in opposite direction, we assume the influences of the two wires will cancel out because of symmetry. For other patterns, if the upward transition of one wire increases the delay, we see that  has greater delay than - or -. Similarly, if the downward transition increases the delay, the pattern  has greater delay than - or -. So we assume that the longest delay happens when two symmetric wires have either  or  transitions.

Based on this assumption, we search all possible symmetric transition patterns to find the worst-case patterns in each class, which
are listed in the second column of Table~\ref{tab:5}, where the pattern on wires 8, 9, and 10 are shown in the parenthesis. The simulated worst-case delays for all , denoted by , are compared with the delays by our five-wire model and the model in \cite{Sot01} in Table~\ref{tab:5}. The error percentage of our model and the model in \cite{Sot01}  are also shown in Table~\ref{tab:5}. For all five classes, the \textbf{maximum} and \textbf{minimum} errors by our model are only 45.10\% and 5.66\%, respectively, as opposed to 86.84\% and 8.89\% by the model in \cite{Sot01}, respectively. For all classes except , our five-wire model outperforms the model in \cite{Sot01}. The model in \cite{Sot01} also has a large error percentage for .




With a 33-wire bus, we focus on the delay of the middle wire (wire 17). Since there are  transition patterns, it is infeasible to search all possible symmetric transitions as before to find the worst-case patterns. We make the following three assumptions: (1) The worst patterns in each classes are symmetric; (2) The closer the wire gets to the middle wire, the greater the coupling on the settling of the middle wire; (3) We initialize the middle three wires to a pattern in , and initialize all other wires with opposite transitions to the middle wire. Based on these three assumptions, we use Alg.~\ref{alg:findworst} to find the patterns with largest delays. We denote by  the updated transition pattern of an -wire bus after the -th iteration of Alg.~\ref{alg:findworst}, where  is odd. Alg.~\ref{alg:findworst} can greatly reduce the simulation time for identifying the worst-case patterns. For instance, the worst-case patterns for an -wire bus can be identified by simulating only  transition patterns.


\begin{algorithm}[!tp]
  \caption{The algorithm for identifying the worst-case pattern, with respect to the three assumptions, in an -wire bus.}
  \begin{algorithmic}
    \REQUIRE -wire bus;
    \STATE \textbf{Initialize}:  is initialized with transitions opposite to wire , except for wires , , and ;
    \STATE ;
    \REPEAT
    \FOR{ =  to 1}
    \STATE Flip the transition of wires  and () in ;
    \IF{the delay of wire  increases}
    \STATE Keep the changes;
    \ELSE
    \STATE Reverse the changes;
    \ENDIF
    \ENDFOR
    \STATE ;
    \STATE Update  with the current pattern;
    \UNTIL{}
    \RETURN Worst-case transition pattern for wire ;
  \end{algorithmic}
  \label{alg:findworst}
\end{algorithm}


We note that the one assumption about the worst-case patterns for 17-wire buses and the three assumptions about 33-wire buses are made in order to reduce the complexity of finding the worst-case patterns. We did verify our three assumptions about 33-wire buses over 9- and 11-wire buses: the worst cases for all the classes based on Alg.~\ref{alg:findworst} are indeed the worst cases by exhaustive search.
This also verifies the assumption for 17-wire buses, since it is one of the three assumptions for 33-wire buses.
For instance, the worst-case  pattern of a 11-wire bus is given by -- with exhaustive search. In Alg.~\ref{alg:findworst}, starting from --, the worst-case pattern is found via the order: --  --  --  --.
Unfortunately, it is difficult to verify Alg.~\ref{alg:findworst}, even for one case, for 17- or 33-wire buses, because the complexity would be prohibitive. For instance, for each class focusing on the middle wire, there are  possible patterns for a 17-wire bus (and  for a 33-wire bus), and it takes about 166 days to simulate these cases.





The worst transition patterns for each class in a 33-wire bus, with respect to the three assumptions above, are listed in the second column of Table~\ref{tab:6}, where the pattern on wires 16, 17, and 18 are shown in the parenthesis.
The simulated worst-case delays of wire 17 for all  patterns, denoted by , are compared with the delays of our five-wire model and the model in \cite{Sot01}. The error percentages of our model and the model in \cite{Sot01} are also shown in Table~\ref{tab:6}. The \textbf{maximum} and \textbf{minimum} errors by our model are only 45.23\% and 5.95\%, respectively, in comparison to 86.87\% and 7.61\% by the model in \cite{Sot01}, respectively. Again, for all classes except , our five-wire model outperforms the model in \cite{Sot01}. The model in \cite{Sot01} also has a large error percentage for .

Since our revised models also account for the loading capacitance, we also simulate 17- and 33-wire buses with  fF, which represents the loading capacitance induced by a 400 times inverter. The simulated worst-case delays of the middle wire for all  patterns, denoted by , are compared with the delays  by our five-wire model as shown in Table~\ref{tab:100fF}. The error percentages of our model are also shown in Table~\ref{tab:100fF}. The worst-case patterns are obtained via Alg.~\ref{alg:findworst}. The worst-case patterns are different from those in Tables \ref{tab:5} and \ref{tab:6} due to the varying of the loading capacitances. However, our five-wire model can still approximate the delays with similar error percentages as those in Tables \ref{tab:5} and \ref{tab:6}.


Finally, we remark that the longest delays for each class in Tables \ref{tab:5} and \ref{tab:6} are approximately the same for both 17- and 33-wire buses.
Based on the simulation results of 17- and 33-wire buses, we conjecture that our five-wire model would be more accurate than the model in \cite{Sot01} for buses with any number of wires.





\subsection{Performance of CACs}\label{sec:simCACs}
In the simulation results above, we assume the transition patterns are arbitrary. Herein, we assume the transition patterns are limited to those of CACs. We evaluate the performance of our delay model for three families of CACs \cite{Dua01,Vic01,Sri07}: {\it one Lambda codes} (OLCs), {\it forbidden pattern codes} (FPCs), and {\it forbidden overlap codes} (FOCs).
Based on our five-wire model, the worst delays of aforementioned CACs are shown in Tables~\ref{tab:5wire}, \ref{tab:wire1}, and \ref{tab:wire2}.
Based on the model in \cite{Sot01}, the worst delays of aforementioned CACs are approximated by , , and , respectively.
Since the number of transition patterns is a quadratic function of the number of codewords, it is time-consuming to simulate a large bus to get the worst-case delays on all wires.
Hence, for each CAC, we simulate an 8-wire bus. The numbers of codewords of OLC, FPC, and FOC are given by 16, 68, and 149, respectively. The total numbers of transition patterns for OLC, FPC, and FOC are given by 240, 4556, and 22052, respectively.
We obtain by simulation the maximum delays of each wire for all transition patterns. The simulation results are shown in Table~\ref{tab:8wire}, where the delays given by our five-wire model and the model in \cite{Sot01} are also included. Intuitively, the worst-case delays of any two symmetric wires are the same, since the symmetric transition of a valid transition pattern is also valid.
As shown in Table~\ref{tab:8wire}, the simulated delays of symmetric wires are very close.
For OLCs, FPCs, and FOCs, the largest delays are emphasized in boldface. As Table~\ref{tab:8wire} shows,
our delay models are more accurate than the model in \cite{Sot01} for all three families of CACs.


\begin{table}[!t]
\caption{Comparison of simulated delays and delays given by our five-wire model and \cite{Sot01} for all wire in an 8-wire bus, where , , and  denote the delays of wires 3-8, wire 1 (), and wire 2 (), respectively. All the delays are in .}\label{tab:8wire}
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
\multirow{2}{*}{wire } & \multicolumn{3}{c|}{Delays}\\
\cline{2-4}
& OLC & FPC& FOC\\
\hline
1 & \textbf{55.36} & \textbf{107.43} & 107.73\\
\hline
2 & 32.20 & 102.71 & 159.65\\
\hline
3 & 51.40 & 106.65 & 154.59\\
\hline
4 & 51.06 & 101.91 & 162.61\\
\hline
5 & 50.79 & 101.89 & \textbf{162.77}\\
\hline
6 & 51.39 & 106.53 & 154.62\\
\hline
7 & 32.46 & 102.72 & 160.61\\
\hline
8 & \textbf{55.36} & 107.39 & 108.88\\
\hline
\hline
\cite{Sot02} & 73.50 & 141.45 & 209.40\\
\hline
 & 62.09 & 106.43 & 152.24\\
\hline
 & 53.43 & 98.76 & 98.76 \\
\hline
 & 42.52 & 102.84 & 157.64\\
\hline
\end{tabular}
\end{center}
\end{table}












\section{Conclusions and future work}\label{sec:conclusion}
In this paper, we propose improved analytical delay models for coupled interconnects. We first derive closed-form expressions of the signals on the bus, based on the distributed RC model, and then approximate the delays of different patterns by evaluating these closed-form expressions. We focus on three-wire and five-wire models, and simulation results show that our model has better accuracy than the model in \cite{Sot01}. Although our models are based on three-wire and five-wire buses, they are not limited to these two cases. For a bus with more than five wires, our five-wire model can still approximate delays better than the model in \cite{Sot01}. 

\bibliographystyle{IEEEtran}
\bibliography{bibbus}



\end{document}
