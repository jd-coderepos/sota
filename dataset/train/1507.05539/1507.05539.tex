\documentclass{tlp}

\usepackage{aopmath}


\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{bm} \usepackage{amstext}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{xcolor}
\usepackage{framed}


\usepackage{url}
\usepackage{hyperref}
\usepackage{verbatim}
\usepackage[english]{babel}

\usepackage{longtable} \usepackage{xr}

\externaldocument{appendix}


\newtheorem{conjecture}{Conjecture}

\newtheorem{definition}{Definition}[section]
\newtheorem{example}[theorem]{Example}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{setting}[theorem]{Setting}
\newtheorem{proviso}{Proviso}
\newtheorem{remark}{Remark}

\newtheorem{tclaim}[theorem]{Claim}



\newenvironment{cenchop}{\renewcommand{\arraystretch}{1.3}\begin{center}\begin{tabular}{l}}{\end{tabular}\end{center}\renewcommand{\arraystretch}{1}}
\newenvironment{longchop}{\renewcommand{\arraystretch}{1.3}\begin{center}\begin{longtable}{l}}{\end{longtable}\end{center}\renewcommand{\arraystretch}{1}}
\newenvironment{cenwidth}[1]{\begin{center}\begin{minipage}{#1}}{\end{minipage}\end{center}}

\newcommand{\qsp}{\
(\head{\rl},\,\bpos{\rl},\,\bneg{\rl})

T(\var u,\var v)\gets R(\var u,\var v),\,\neg S(\var v).

R(\tvar u)\sugind\gets\simplebody{\tvar u,\tvar v}.

R(\tvar u)\sugas{\var y}\gets\simplebody{\tvar u,\tvar v,\var y}.

\schtime=\{\rar{\reltime}1,\,\rar{\timesucc}2,\,\rar{<\!}2,\,\rar{\neq\!}2\}.

\Itime & = & \{\reltime(s),\,\timesucc(s,s+1)\mid s\in\Nat\}\\
 &  & {}\cup\{(s<t)\mid s,t\in\Nat:\, s<t\}\\
 &  & {}\cup\{(s\neq t)\mid s,t\in\Nat:\, s\neq t\}.

R(\var x,\var s,\tvar u)\gets\addlt{\simplebody{\tvar u,\tvar v}}{\var x}{\var s}.\label{eq:pure-duc}

R(\var x,\var t,\tvar u)\gets\addlt{\simplebody{\tvar u,\tvar v}}{\var x}{\var s},\,\timesucc(\var s,\var t).\label{eq:pure-ind}

R(\tvar u)\sugas{\var y}\gets\simplebody{\tvar u,\tvar v,\var y}

\cronrulecandidate .\label{eq:sz-cand}

\rulechosen .\label{eq:chosen}

\ruleother .\label{eq:other}

\ruledeliv .\label{eq:deliv}

\decl H & = & \{R(x,s,\bar{a})\mid x\in\nw,\, s\in\Nat,\, R(\bar{a})\in H(x)\}\\
 &  & {}\cup\{\relall(x)\mid x\in\nw\}\cup\Itime.

M=\decl H\cup M_{A}^{\lsnd}\cup M_{A}^{\lrcv}\cup M_{B}^{\lsnd}\cup M_{B}^{\lrcv},

    \begin{array}{ll}
    M_A^\lsnd = {} & \{\cand_A(z,s,z,t)\mid s,t\in\Nat\} \\
                & {}\cup \{\chosen_A(z,s,z,s+1)\mid s\in\Nat\} \\
                & {}\cup \{\other_A(z,s,z,t)\mid s,t\in\Nat,\, t\neq s+1\};\\   
    \\
    M_A^\lrcv = {} & \{A(z,s)\mid s\in\Nat,\, s\geq 1\}; \\
    \\
    M_B^\lsnd = {} & \{\cand_B(z,s,z,t)\mid s,t\in\Nat,\, s\geq 1\} \\
                & {}\cup \{\chosen_B(z,1,z,0)\} \\
                & {}\cup \{\chosen_B(z,s,z,s+1)\mid s\in\Nat,\, s\geq 2\} \\
                & {}\cup \{\other_B(z,1,z,t)\mid t\in\Nat,\, t\neq 0\} \\
                & {}\cup \{\other_B(z,s,z,t)\mid s,t\in\Nat,\, s\geq 2,\, t\neq s+1\};\\
    \\
    M_B^\lrcv = {} & \{B(z,s)\mid s\in\Nat\}.
    \end{array}
    
\rulebeforestep .\label{eq:before-step}

\rulebeforetr .\label{eq:before-tr}

R(\tvar u)\sugas{\var y}\gets\simplebody{\tvar u,\tvar v,\var y}

\rulecandidate .\label{eq:cand}

\rulebeforesend .\label{eq:before-send}

M=\decl H\cup M_{A}^{\lsnd}\cup M_{A}^{\lrcv}\cup M^{\lbefore},

    \begin{array}{ll}
    M_A^\lsnd = {} & \{\cand_A(x,s,y,t)\mid s,t\in\Nat\} \\
                & {}\cup \{\chosen_A(x,s,y,0)\mid s\in\Nat\} \\
                & {}\cup \{\other_A(x,s,y,t)\mid s,t\in\Nat,\, t\neq 0\};\\
    \\
    M_A^\lrcv = {} & \{A(y,0)\} \\
                & {}\cup \{\pred{first}(y,s) \mid s\in\Nat,\, s\geq 1\}; \\
    \\
    M^\lbefore = {} & \{\before(x,s,x,t) \mid s,t\in\Nat,\, s<t\};\\                 
                 & {}\cup \{\before(y,s,y,t) \mid s,t\in\Nat,\, s<t\};\\
                 & {}\cup \{\before(x,s,y,t) \mid s,t\in\Nat\}
    \end{array}
    
\rulehassender .\label{eq:has-sender}

\ruleissmaller .\label{eq:is-smaller}

\rulehasmax .\label{eq:has-max}

\rulercvinf .\label{eq:rcv-inf}

T(\var y,\tvar u)\gets\simplebody{\tvar u,\var y}

T(\tvar u)\sugas{\var y}\gets\simplebody{\tvar u,\var y}

 \begin{array}{ll}
 & I=\cnfs_{a}(x)\cup\untag m,\\
 & D=\deduc{\ded}(I),\\
 & \sendto iy=\{\pair i{\, R(\bar{a})}\mid R(y,\bar{a})\in\async{\ded}(D)\}\text{ for each }y\in\nw,
 \end{array}

 \begin{array}{ll}
    & \cnfs_{b}(x)=H(x)\cup\induc{\ded}(D),\\
    & \cnfb_{b}(x)=(\cnfb_{a}(x)\setminus m)\cup\sendto ix,
 \end{array}
 \qquad
 \begin{array}{ll}
    & \cnfs_{b}(y)=\cnfs_{a}(y),\\
    & \cnfb_{b}(y)=\cnfb_{a}(y)\cup\sendto iy.
 \end{array}

\trace{\run}=\bigcup_{i\in\Nat}\addlt{D_{i}}{x_{i}}{\,\locR i}.

(x_{1},s_{1})\caus(x_{2},s_{2})\caus\ldots\caus(x_{n},s_{n}),

\globR{x_{i},s_{i}}<\globR{x_{i+1},s_{i+1}}.

\globR{x_{i},s_{i}}<\globR{x_{i+1},s_{i+1}}.

M=\decl H\cup\bigcup_{i\in\Nat}\slice i,

\slice i=\slicecaus i\cup\slicefin i\cup\sliceduc i\cup\slicesnd i,

\proj M{\toloct{\schof{\ded}}}=\bigcup_{i\in\Nat}\sliceduc i=\bigcup_{i\in\Nat}\addlt{D_{i}}{x_{i}}{s_{i}}=\trace{\run}.

\before(x,s,y,t)\gets\before(x,s,z,u),\,\before(z,u,y,t).

(x_{1},s_{1})\cauM(x_{2},s_{2})\cauM\ldots\cauM(x_{n},s_{n})

\before(x_{k},s_{k},x_{k+1},s_{k+1})\gets\chosen_{R}(x_{k},s_{k},x_{k+1},s_{k+1},\bar{a}).

\cand_{R}(x_{k},s_{k},x_{k+1},s_{k+1},\bar{a})\in M.

\before(x,s,y,t)\gets\before(x,s,z,u),\,\before(z,u,y,t).

\rcvinf(y,t)\gets\hassender(y,t,x,s).

\hasmax(y,t,x)\gets\hassender(y,t,x,s).

\issmaller(y,t,x,s)\gets\hassender(y,t,x,s),\,\hassender(y,t,x,s'),\, s<s'.

(y,t')\cauM\ldots\cauM(y,t).

(y,t)\cauM(y,t+1)\cauM\ldots\cauM(y,t').

\{s\in\Nat\mid\globM{x,s}<i\}.

\droplt{\left(\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs\cup\projlt{\Mind}xs\right)}.

\begin{array}{ll}
\{\pair{\globM{y,t}}{\, R(\bar{a})}\mid
    & \exists u:\,\chosen_{R}(y,t,x,u,\bar{a})\in M,\\&\globM{y,t}<i\leq\globM{x,u}\}.
\end{array}

m_{i}=\{\pair{\globM{y,t}}{\, R(\bar{a})}\mid\chosen_{R}(y,t,z,u,\bar{a})\in M,\,\globM{z,u}=i\}.

M=\decl H\cup\bigcup_{i\in\Nat}\slice i.

\slice i=\slicecaus i\cup\slicefin i\cup\sliceduc i\cup\slicesnd i.

\before(x,s,x,s+1)\gets\relall(x),\,\timesucc(s,s+1).

\before(x,s,x_{i},s_{i})\gets\chosen_{R}(x,s,x_{i},s_{i},\bar{a}).

\chosen_{R}(x,s,x_{i},s_{i},\bar{a})\in\slicesnd j\subseteq\slice j.

\before(x,s,x_{i},s_{i})\gets\before(x,s,z,u),\,\before(z,u,x_{i},s_{i}).

\hassender(x_{i},s_{i},x,s)\gets\chosen_{R}(x,s,x_{i},s_{i},\bar{a}).

\issmaller(x_{i},s_{i},x,s) & \gets & \hassender(x_{i},s_{i},x,s),\,\hassender(x_{i},s_{i},x,s'),\\
 &  & s<s'.

\hasmax(x_{i},s_{i},x)\gets\hassender(x_{i},s_{i},x,s).

\cnfs_{i}(x_{i})\cup\untag{m_{i}},

\addlt{\cnfs_{i}(x_{i})}{x_{i}}{s_{i}} & = & \addlt{H(x_{i})}{x_{i}}{s_{i}}\cup\addlt{\induc{\ded}(D_{j})}{x_{i}}{s_{j}+1}\\
 & \subseteq & N.

R(x_{i},s_{i},\bar{a})\gets\chosen_{R}(x_{k},s_{k},x_{i},s_{i},\bar{a}).

\chosen_{R}(x_{i},s_{i},y,t,\bar{a})\gets\cand_{R}(x_{i},s_{i},y,t,\bar{a}).

\other_{R}(x_{i},s_{i},y,u,\bar{a}) & \gets & \cand_{R}(x_{i},s_{i},y,u,\bar{a}),\,\chosen_{R}(x_{i},s_{i},y,t,\bar{a}),\\
 &  & u\neq t.

\shaddlt{A_{l}}{x_{i}}{s_{i}}\subseteq N.

V'(\bneg{\rl'})\cap M=\emptyset.

\cand_{R}(x_{i},s_{i},y,t,\bar{a})\in N.

\before(x,s,y,t)\gets\chosen_{R}(x,s,y,t,\bar{a}).

\before(x,s,y,t)\gets\before(x,s,z,u),\,\before(z,u,y,t).

\hassender(x,s,y,t)\gets\chosen_{R}(y,t,x,s,\bar{a}).

\issmaller(x,s,y,t) & \gets & \hassender(x,s,y,t),\,\hassender(x,s,y,t'),\\
 &  & t<t'.

\hasmax(x,s,y)\gets\hassender(x,s,y,t).

\rcvinf(x,s)\gets\hassender(x,s,y,t).

R(x,s,\bar{a})\in\addlt{D_{i}}xs=\addlt{D_{i}}{x_{i}}{s_{i}}=\sliceduc i\subseteq M.

R(x,s,\bar{a})\gets\chosen_{R}(y,t,x,s,\bar{a}).

\chosen_{R}(x,s,y,t,\bar{a})\gets\cand_{R}(x,s,y,t,\bar{a}).

\other_{R}(x,s,y,t,\bar{a}) & \gets & \cand_{R}(x,s,y,t,\bar{a}),\,\chosen_{R}(x,s,y,t',\bar{a}),\\
 &  & t\neq t'.

\up M=\proj M{\toloct{\edb{\ded}}}\cup\ind M\cup\deliv M.

\cnfs_{0}(x)=\droplt{\left(\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs\cup\projlt{\Mind}xs\right)}

\begin{array}{ll}
\{\pair{\globM{y,t}}{\, R(\bar{a})}\mid
    & \exists u:\,\chosen_{R}(y,t,x,u,\bar{a})\in M,\\&\globM{y,t}<0\leq\globM{x,u}\}.
\end{array}

\before(y,t,x_{i},s_{i})\gets\chosen_{R}(y,t,x_{i},s_{i},\bar{a}).

\globM{y,t}<i\leq\globM{x_{i},s_{i}}.

\cnfs_{i+1}(x)=\droplt{\left(\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs\cup\projlt{\Mind}xs\right)}.

\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs=\addlt{H(x)}xs.

\cnfs_{i+1}(x) & = & \droplt{\left(\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs\cup\projlt{\Mind}xs\right)}\\
 & = & H(x)\cup\induc{\ded}\mstep{D_{i}}\\
 & = & \cnfs(x).

\sendto ix=\{\pair i{R(\bar{a})}\mid R(x,\bar{a})\in\async{\ded}\mstep{D_{i}}\}.

\trace{\run}=\bigcup_{i\in\Nat}(\addlt{D_{i})}{x_{i}}{\,\locR i}.

\trace{\run}=\bigcup_{i\in\Nat}\addlt{(D_{i})}{x_{i}}{s_{i}}.

\trace{\run}=\bigcup_{i\in\Nat}\projlt M{x_{i}}{s_{i}}.

\trace{\run} & = & \bigcup_{(x,s)\in A}\projlt Mxs\\
 & = & \bigcup_{(x,s)\in\nwnat}\projlt Mxs.

\trace{\run}=\proj M{\toloct{\schof{\ded}}}.

\shprojlt{\proj M{\toloct{\edb{\ded}}}}xs=\shprojlt{\proj{\decl H}{\toloct{\edb{\ded}}}}xs=\addlt{H(x)}xs.

|\{s\in\Nat\mid\globM{x,s}<i\}|,

|\{s\in\Nat\mid s<s_{i}\}|.

(x_{i},s)\cauM(x_{i},s+1)\cauM(x_{i},s+2)\cauM\ldots\cauM(x_{i},t).

\before(x_{i},s,x_{i},s+1)\gets\relall(x_{i}),\,\timesucc(s,s+1).

\proj{\bpos{\grl}}{\toloct{\schof{\ded}}}=\proj{V(\bpos{\rl})}{\toloct{\schof{\ded}}}=\addlt{V(\bpos{\rl''})}{x_{i}}{s_{i}}.

\bpos{\grl}=V''(\bpos{\rl''})=\addlt{V(\bpos{\rl})}{x_{i}}{s_{i}}\cup\{\timesucc(s_{i},s_{i}+1)\}.

\before(x_{i},s_{i},x,u)\gets\chosen_{R}(x_{i},s_{i},x,u,\bar{a}).

\globM{x_{i},s_{i}}<i+1\leq\globM{x,u},

V''(\bneg{\rl''})=\addlt{V(\bneg{\rl})}{x_{i}}{s_{i}}\cup\{\before(x,u,x_{i},s_{i})\}.

\addlt{V(\bneg{\rl})}{x_{i}}{s_{i}}\cap\addlt{(D_{i})}{x_{i}}{s_{i}}=\emptyset.

\addlt{V(\bneg{\rl})}{x_{i}}{s_{i}}\cap\projlt M{x_{i}}{s_{i}}=\emptyset.

\addlt{V(\bneg{\rl})}{x_{i}}{s_{i}}\cap M=\emptyset.

V''(\bpos{\rl''})=\addlt{V(\bpos{\rl})}{x_{i}}{s_{i}}\cup\{\relall(x),\,\reltime(u)\}.

\proj{\bpos{\grl}}{\toloct{\schof{\ded}}}=\proj{V(\bpos{\rl})}{\toloct{\schof{\ded}}}=\addlt{V(\bpos{\rl''})}{x_{i}}{s_{i}}.

\proj{V(\bneg{\rl})}{\toloct{\schof{\ded}}}=\addlt{V(\bneg{\rl''})}{x_{i}}{s_{i}}.

\shprojlt{\strat Mk}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\strat M0=\up M\cup\duc M0.

\shprojlt{\strat M0}{x_{i}}{s_{i}} & = & \shprojlt{\up M}{x_{i}}{s_{i}}\nonumber \\
 & = & \shprojlt{\proj M{\toloct{\edb{\ded}}}}{x_{i}}{s_{i}}\cup\projlt{\ind M}{x_{i}}{s_{i}}\cup\projlt{\deliv M}{x_{i}}{s_{i}}.\label{eq:expression-for-M-0}

\shprojlt{\strat M0}{x_{i}}{s_{i}} & = & \addlt{\cnfs_{i}(x_{i})}{x_{i}}{s_{i}}\cup\addlt{\untag{m_{i}}}{x_{i}}{s_{i}}\\
 & = & \shaddlt{\cnfs_{i}(x_{i})\cup\untag{m_{i}}}{x_{i}}{s_{i}}\\
 & = & \shaddlt{\strat{D_{i}}0}{x_{i}}{s_{i}}.

\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}.

\shprojlt{\strat Mk}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\cnfs_{i}(x_{i})=\droplt{\left(\shprojlt{\proj M{\toloct{\edb{\ded}}}}{x_{i}}s\cup\projlt{\ind M}{x_{i}}s\right)},

\addlt{\cnfs_{i}(x_{i})}{x_{i}}{s_{i}}=\shprojlt{\proj M{\toloct{\edb{\ded}}}}{x_{i}}{s_{i}}\cup\projlt{\ind M}{x_{i}}{s_{i}}.

\chosen_{R}(x,s,y,u,\bar{a})\gets\cand_{R}(x,s,y,u,\bar{a}).

\other_{R}(x,s,y,u,\bar{a})\gets\cand_{R}(x,s,y,u,\bar{a}),\,\chosen_{R}(x,s,y,u',\bar{a}),\, u\neq u'.

R(x_{i},s_{i},\bar{a})\gets\chosen_{R}(y,t,x_{i},s_{i},\bar{a}).

\chosen_{R}(y,t,z,u,\bar{a})\in M,

R(x_{i},s_{i},\bar{a})\gets\chosen_{R}(y,t,x_{i},s_{i},\bar{a}).

\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}.

\shprojlt{\strat Mk}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\shprojlt{M_{l}\cap\strat Mk}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\projlt{\left(\left(\bigcup_{l\in\Nat}M_{l}\right)\cap\strat Mk\right)}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\shprojlt{M\cap\strat Mk}{x_{i}}{s_{i}}=\shprojlt{\strat Mk}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\strat Mk & = & \up M\cup\duc Mk\\
 & = & \proj M{\toloct{\edb{\ded}}}\cup\ind M\cup\deliv M\cup\duc Mk.

M_{0}\cap\strat Mk & = & \proj M{\toloct{\edb{\ded}}}.

\shprojlt{M_{0}\cap\strat Mk}{x_{i}}{s_{i}} & \subseteq & \shprojlt{\up M}{x_{i}}{s_{i}}\\
 & \subseteq & \shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}.

\shprojlt{M_{0}\cap\strat Mk}{x_{i}}{s_{i}} & \subseteq & \shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}\\
 & \subseteq & \shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\shprojlt{M_{l-1}\cap\strat Mk}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\shprojlt{M_{l}\cap\strat Mk}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

\fc & \in & \projlt{\ind M}{x_{i}}{s_{i}}\cup\projlt{\deliv M}{x_{i}}{s_{i}}\\
 & \subseteq & \shprojlt{\up M}{x_{i}}{s_{i}}\subseteq\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}\\
 & = & \shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}\subseteq\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}.

V(\bneg{\rl})\cap\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}=\emptyset.

\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}.

\shaddlt{\strat{D_{i}}k}{x_{i}}{s_{i}}\subseteq\shprojlt{\strat Mk}{x_{i}}{s_{i}}.

\shaddlt{A_{l}}{x_{i}}{s_{i}}\subseteq\shprojlt{\strat Mk}{x_{i}}{s_{i}}.

\shaddlt{A_{0}}{x_{i}}{s_{i}}=\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}=\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}\subseteq\shprojlt{\strat Mk}{x_{i}}{s_{i}}.

\shaddlt{A_{l-1}}{x_{i}}{s_{i}}\subseteq\shprojlt{\strat Mk}{x_{i}}{s_{i}}.

\head{\grl}=V'(\head{\rl'})=\addlt{V(\head{\rl})}{x_{i}}{s_{i}}=\addlt{\fc}{x_{i}}{s_{i}}\in M.

V(\bneg{\rl})\cap\strat{D_{i}}{k-1}=\emptyset.

\addlt{V(\bneg{\rl})}{x_{i}}{s_{i}}\cap\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}=\emptyset.

V'(\bneg{\rl'})\cap\shaddlt{\strat{D_{i}}{k-1}}{x_{i}}{s_{i}}=\emptyset.

V'(\bneg{\rl'})\cap\shprojlt{\strat M{k-1}}{x_{i}}{s_{i}}=\emptyset.

V(\bpos{\rl})\subseteq A_{l-1}.

\bpos{\grl}\subseteq\shaddlt{A_{l-1}}{x_{i}}{s_{i}}.

\bpos{\grl}\subseteq\shprojlt{\strat Mk}{x_{i}}{s_{i}}\subseteq M.


\end{itemize}
\end{proof}



\tline


\end{appendix}
 
\end{document}
